diff -up xine-lib-1.1.15/src/combined/ffmpeg/ff_audio_decoder.c.bits_per_sample xine-lib-1.1.15/src/combined/ffmpeg/ff_audio_decoder.c
--- xine-lib-1.1.15/src/combined/ffmpeg/ff_audio_decoder.c.bits_per_sample	2008-07-15 18:13:03.000000000 -0500
+++ xine-lib-1.1.15/src/combined/ffmpeg/ff_audio_decoder.c	2008-12-17 13:11:23.000000000 -0600
@@ -269,7 +269,11 @@ static void ff_audio_decode_data (audio_
        * bits/sample for some codecs (e.g. MS ADPCM) */
       this->audio_bits = 16;  
   
-      this->context->bits_per_sample = this->audio_bits;
+#if LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0)
+     this->context->bits_per_sample = this->audio_bits;
+#else
+     this->context->bits_per_coded_sample = this->audio_bits;
+#endif
       this->context->sample_rate = this->audio_sample_rate;
       this->context->channels    = this->audio_channels;
       this->context->codec_id    = this->codec->id;
@@ -327,7 +331,12 @@ static void ff_audio_decode_data (audio_
                               &decode_buffer_size,
                               &this->buf[0],
                               this->size);
-	this->audio_bits = this->context->bits_per_sample;
+
+#if LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0)
+        this->audio_bits = this->context->bits_per_sample;
+#else
+        this->audio_bits = this->context->bits_per_coded_sample;
+#endif
 	this->audio_sample_rate = this->context->sample_rate;
 	this->audio_channels = this->context->channels;
 	if (!this->audio_bits || !this->audio_sample_rate || !this->audio_channels)
diff -up xine-lib-1.1.15/src/combined/ffmpeg/ff_video_decoder.c.bits_per_sample xine-lib-1.1.15/src/combined/ffmpeg/ff_video_decoder.c
--- xine-lib-1.1.15/src/combined/ffmpeg/ff_video_decoder.c.bits_per_sample	2008-07-16 16:01:56.000000000 -0500
+++ xine-lib-1.1.15/src/combined/ffmpeg/ff_video_decoder.c	2008-12-17 13:15:37.000000000 -0600
@@ -939,7 +939,12 @@ static void ff_handle_header_buffer (ff_
               this->context->extradata_size);
       }
       
-      this->context->bits_per_sample = this->bih.biBitCount;
+#if LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0)
+      this->context->bits_per_sample = this->bih.biBitCount; 
+#else
+      this->context->bits_per_coded_sample = this->bih.biBitCount; 
+#endif
+
             
     } else {
     
